### 1. JPQL - 경로 표현식

- 경로 표현식이란? <br/>
.(점)을 찍어 객체 그래프를 탐색하는 것<br/>

```java
select m.username //-> 상태 필드
 from Member m 
 join m.team t //-> 단일 값 연관 필드
 join m.orders o //-> 컬렉션 값 연관 필드
where t.name = '팀A';
```

<br/>
<br/>
<br/>

- 경로 표현식 용어정리<br/>
    - 상태 필드(state field): 단순히 값을 저장하기 위한 필드(ex: m.username)
    - 연관 필드(association field): 연관관계를 위한 필드
        - 단일 값 연관 필드: `@ManyToOne, @OneToOne`, 대상이 엔티티(ex: m.team)
        - 컬렉션 값 연관 필드: `@OneToMany, @ManyToMany`, 대상이 컬렉션(ex: m.orders)

<br/>

- 1) 상태 필드 
```java
select m.username, m.age from Member m
```
<br/>

- 2) 단일 값 연관경로 탐색

[JPQL]
```java
String query = "select o.member from Order o";

String qeuryAn = "select m.team from Member m";
                    //묵시적 내부 조인(단일 값 연관경로)
```

<br/>

[SQL]에서 실행되는 쿼리<br/>
```java
select m.* 
 from Orders o 
 inner join Member m on o.member_id = m.id

select m.* 
 from Member m 
 inner join Team t on m.team_id = t.id
```

<br/>

- 3) 컬렉션 연관경로 탐색<br/>

[JPQL]
```java
String query = "select t.members from Team t";
//묵시적 내부 조인(컬렉션 값 연관경로)

//컬렉션 값 연관경로 .. 탐색불가..컬렉션 자체가 반환되기에
//대안 : from절을 통한 명시적 조인을 통해 가능

String queryDv = "select m.username from Team t join t.members m";
//명시적 조인 (컬렉션 값 연관경로) - join키워드 직접 사용

//별칭을 통해 탐색 가능

//결론: 묵시적 조인 쓰지 않는다. 쿼리 튜닝하기도 어렵다. 명시적 조인 추천

List resultList = em.createQuery(query, Collection.class).getResultList();

for(Object s : resultList){
    System.out.println(s);
}
```

<br/>
<br/>

- 명시적 조인: join 키워드 직접 사용<br/>
`select m from Member m join m.team t`
<br/>

- 묵시적 조인: 경로 표현식에 의해 묵시적으로 SQL 조인 발생(내부 조인만 가능)<br/>
`select m.team from Member m`

- 경로 탐색을 사용한 묵시적 조인 시 주의사항
    - **항상 내부 조인**
    - 컬렉션은 경로 탐색의 끝 => **명시적 조인을 통해 별칭을 얻어야함**

- 가급적 묵시적 조인 대신에 명시적 조인 사용


