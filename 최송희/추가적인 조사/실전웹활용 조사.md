## 운영체제

- 컴퓨터를 동작시키는 데 도움을 주는 소프트웨어
- 운영체제가 없어도 컴퓨터를 동작시킬 수 있지만, 컴퓨터 사용자가 하드웨어 자체를 다룬다는 것은 쉽지 않은 일이기 때문에 기본적으로 컴퓨터에 운영체제를 탑재하는 것
- 운영체제는 컴퓨터 하드웨어 바로 윗단에 설치되는 소프트웨어이며 하드웨어와 운영체제를 합쳐서 `컴퓨터 시스템`이라고도 부름 우리가 사용하는 각종 소프트웨어들은 바로 이 컴퓨터 시스템 위에서 작동하게 됨
- 사용자가 편리하게 컴퓨터를 사용하게 환경을 제공하는 여러 프로그램의 모임을 운영체제라고 할 수 있다.
- 운영체제의 종류에는 윈도우, 맥OS, 리눅스와 유닉스 등이 있다.

<br/>
<br/>

### 1. 운영체제의 역할
- 운영체제는 사용자에게 컴퓨터 시스템을 편리하게 사용할 수 있는 인터페이스를 제공(GUI, CLI)
* GUI : 사용자가 그래픽을 통해 사용자와 소통하는 방식(아이콘, 그림으로 소통)
* CLI : 글자 입출력으로 사용자와 소통하는 방식(윈도우의 CMD/맥의 Termianl/리눅스의 terminal)<BR/>
- 프로세서, 기억장치나 입출력장치 등 자원을 관리하며 시스템의 오류를 검사하고 복구하는 역할, 자원 보호, 자원의 스케줄링 기능 등 많은 역할을 한다.

- 운영체제의 가장 핵심적인 기능은 각종 하드웨어를 관리하는 일을 하며, 컴퓨터 시스템 내부 자원을 효율적으로 관리

#### (1) 프로세스 관리
- 컴퓨터의 CPU가 하나라면 하나의 프로세스만 관리하고 처리할 수 있지만, 동시에 운영체제에서 프로세스들을 관리하기 때문에 여러가지 일을 동시에 컴퓨터에서 진행할 수 있는 것(관련 내용 : 시분할, CPU 스케줄링)

#### (2) 메모리 관리
- 메모리는 CPU가 직접 접근할 수 있는 컴퓨터 내부의 기억장치로, 모든 프로그램은 메모리에 올려서 실행
- 여러 프로그램이 실행되기 때문에 메모리 관리가 없다면 프로그램 간에 메모리 침범 이슈 문제가 발생 가능성 O
- 이러한 문제를 예방하고자 운영체제에서 메모리 관리를 수행
- 프로그램마다 얼마만큼의 메모리를 할당해 줄 것인지 관리
- 물리적 메모리 관리방식 : 고정 분할 방식/가변 분할 방식/가상 메모리 방식 등

#### (3) 하드웨어 관리
- 운영체제에서는 사용자가 하드웨어에 직접적으로 접근하는 것을 막음<br/>
예로, 하드디스크의 특정영역에 대해 사용자가 데이터를 저장하려는 경우를 생각해보면, 중요한 데이터를 덮어버릴 수도 있는 위험이 있을 수 있고, 모르는 누군가에 의해 컴퓨터 시스템이 문제를 일으킬 수 있다.
- 따라서 하드디스크에 있는 파일들을 안전하고 효율적으로 관리 및 저장하는 역할을 함

 <br/>
 <br/>

### 2. 운영체제의 구조
- 항상 필요한 부분만을 메모리에 올려놓고 사용하고, 필요하지 않은 부분은 메모리에 올려놓지 않는다. 
- 메모리에서 항상 존재하는 운영체제의 일부를 커널이라고 하는데, 커널은 운영체제의 코드 중 가장 핵심적인 부분(좁은 운영체제라고도 불림)

#### 1) 인터페이스
- 사용자는 커널에 직접 접근이 불가한데, 운영체제에서 제공하는 인터페이스를 통해서만 커널에 명령을 내릴 수 있다. 사용자와 애플리케이션은 인터페이스를 통해서만 커널에 명령을 내릴 수 있고, 인터페이스에서만 결과를 받게 된다. 대표적인 인터페이스는 위에서 설명했던 GUI와 CLI가 있다.

#### 2) 커널
- 커널은 프로세스, 메모리, 저장장치를 관리하는 기능을 하며, 시스템 호출 System call과 드라이버가 있다.

(1) 시스템 호출(System Call)
- 커널이 자신을 보호하기 위해서 생성한 인터페이스로, 직접 애플리케이션에서 하드웨어 자원에 접근하거나 수정하려고 할 때 이를 방지하고자 시스템 자원과 관련된 함수를 제공한다. (write, read, printf 등) 애플리케이션에서 하드웨어 자원에 접근하는 경우는 데이터를 덮어쓰려고 하거나/ 지우려고 하는 등 경우가 있다.
- 애플리케이션에서 하드웨어에 직접 접근해양 하는 경우가 있거나 관련 서비스를 이용하기 위해서는 커널 함수를 호출하는 시스템 콜을 사용해야 한다. 이를 통해 운영체제는 컴퓨터 자원을 보호할 수 있다.
- 시스템 호출은 소프트웨어 인터럽트 중 한 종류에 속한다. 여기서 인터럽트는 프로세스가 작용 중 운영체제에게 CPU제어권을 넘길 때 인터럽트를 사용하는 것을 말한다. 인터럽트가 되면 레지스터와 PC(Program Center)를 save하고 CPU 제어권을 운영체제에게 넘기고 해당 인터럽트에 알맞는 인터럽트 처리 루틴을 진행하게 된다.

<br/>
<br/>

* 인터럽트에 대하여 알아보면
1. 하드웨어 인터럽트(Interrupt) : 하드웨어가 발생시킨 인터럽트를 말한다.
2. 소프트웨어 인터럽트(Trap) : 프로그램이 스스로 자신이 보유한 CPU 자원을 운영체제에게 넘긴 것을 말하며, Exception과 System call이 있다. 

<br/>
<br/>

(2) 드라이버
- 커널과 하드웨어를 합한 인터페이스를 드라이버라고 한다. 커널은 입출력의 기본 부분만 제작하고 마우스나 키보드와 같은 하드웨어는 꽂기만 해도 바로 작동하게 된다.
- 복잡한 하드웨어는 하드웨어 제작사에서 만든 소프트웨어(디바이스 드라이버라고도 한다)를 따로 설치해서 사용해야한다는 복잡성이 있다. 이때 이 소프트웨어는 프린트, 스캐너 등 장비를 구매해 설치해야한다.

<BR/>

### 3. 운영체제의 목적

- 처리능력 향상, 반환시간 단축, 사용 가능도 향상, 신뢰도 향상이 운영체제의 목적이다. 
- 처리능력, 반환시간, 사용 가능도, 신뢰도라는 기준은 운영체제의 성능을 평가하는 기준이다. 
* 처리능력 : 일정시간 안에 시스템이 처리하는 일의 양을 의미<br>
* 반환시간 : 시스템에 작업을 의뢰한 시간부터 처리가 완료할 때까지 걸린 시간을 의미<br/>
* 사용가능도 : 시스템을 사용할 필요가 있을 때 바로 사용가능한 정도<br/>
* 신뢰도 : 시스템이 주어진 문제를 정확히 해결하는 정도를 의미<br/>

<BR/>

### 4. 운영체제의 주요 자원관리 목록
1. 프로세스 자원관리 
- 프로세스 스케줄링과 동기화 관리를 담당한다. 공유 데이터에 대해 동시에 접근한다면 데이터의 불일치 문제를 발생할 수 있기 때문에 일관성 유지를 위해 협력 프로세스 간에 실행순서를 정해주는 매커니즘이 존재한다.
- 프로세스를 생성하고 제거하는 역할을 하며, 시작과 정지, 메세지를 전달하는 기능을 담당한다.

<br/>

2. 기억장치 관리
- 프로세스에게 메로리를 할당하고 회수하며 관리하는 역할을 담당한다.

<br/>

3. 주변장치 관리
- 입출력 장치를 스케줄링하고 전반적인 관리를 담당한다.

<br/>

4. 파일 관리
- 파일을 생성하고 삭제, 변경하고 유지하는 등 관리를 담당한다.

<br/>
<br/>

### 5. 운영체제에서 관리하는 프로세스

프로세스란, 일반적으로 CPU에 의해 처리되는 사용자 프로그램을 말하며, 실행중인 프로그램을 말하기도 한다. 다양하게 프로세스를 정의할 수 있는데, 다음과 같이 정의가 가능하다.

<br/>

- PCB를 가진 프로그램
- 운영체제가 관리하는 실행의 단위
- 비동기적인 행위를 일으키는 주체

<br/>

#### 프로세스 상태 전이

- 프로세스의 상태 전이는 프로세스가 시스템에 존재하는 동안에 프로세스의 상태가 변화하는 것을 말하고 다음과 같이 프로세스 상태를 정의할 수 있다.

1. 제출(Submit) : 작업 처리를 위해 사용자가 작업을 시스템에 제출한 상태
2. 접수(Hold) : 제출된 작업이 스풀 공간인 디스크의 할당위치에 저장된 상태
3. 준비(Ready) : 프로세스가 프로세서를 할당받으려고 기다리고 있는 상태이다. 프로세스는 스케줄링 큐라는 곳에서 실행을 준비하고, 접수상태 -> 준비상태로의 전이는 JOB 스케줄러에 의해 수행된다.
4. 실행(Run) : 준비상태에 있는 큐에 있는 프로세스가 프로세서를 할당받아서 실행되는 상태를 말한다. 주어진 프로세서 할당시간이 종료되면 준비상태로 전환된다. <br/>
실행중인 프로세스에 입출력 처리가 필요한 경우, 실행중이던 프로세스는 대기상태로 전이되고, 실행상태로의 전이는 CPU 스케줄러에 의해 수행된다.
5. 대기(Wait, Block) : 프로세스의 입출력 처리가 필요한 경우 현재 프로세스는 중단되어 입출력처리가 끝날 때까지 대기하고 있는 상태
6. 종료(Terminated, Exit) : 프로세스의 실행이 끝나고 프로세스 할당이 해제된 상태

<br/>

#### 상태전이 관련 용어
- Dispatch : 준비상태 -> 실행상태로 전이되는 과정을 말한다.
- Wake Up : 입출력 처리작업이 완료되어 프로세스가 대기상태 -> 준비상태로 전이되는 과정
- Spooling : 입출력 데이터를 직접 입출력 장치에 보내지 않고 나중에 한꺼번에 입출력하기 위해 디스크에 저장하는 과정이다. 이것은 느린 입출력 장치의 처리속도를 보완하고 다중 프로그래밍의 성능을 향상시키고자 이러한 방식을 지원한다.